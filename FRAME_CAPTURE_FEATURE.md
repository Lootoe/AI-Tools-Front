# 视频关键帧截取功能

## 功能概述

在分镜编辑器中新增了视频关键帧截取功能，允许用户从生成的视频中截取特定时间点的画面并下载为图片。

## 功能特性

### 1. 快速访问
- 在每个已生成视频的分镜卡片右上角，新增了相机图标按钮
- 点击按钮即可打开关键帧截取弹窗

### 2. 精确控制
- **视频预览**：实时播放视频，支持标准视频控制
- **时间轴拖动**：通过滑块精确定位到任意时间点（精确到 0.01 秒）
- **时间显示**：显示当前时间和总时长，格式为 `MM:SS.MS`

### 3. 实时截取
- 点击"截取当前帧"按钮，立即捕获当前视频画面
- 右侧实时预览截取的图片
- 支持多次截取，可以尝试不同时间点

### 4. 便捷下载
- 截取成功后，点击"下载图片"按钮保存
- 文件命名格式：`分镜_X_Y.YYs.png`
  - X：分镜序号
  - Y.YY：截取时间点（秒）
- 图片格式：PNG（无损压缩，保持最佳质量）

## 使用场景

1. **提取关键画面**：从视频中提取精彩瞬间作为封面或宣传图
2. **质量检查**：截取特定帧检查画面质量和细节
3. **素材收集**：收集视频中的特定场景用于其他用途
4. **参考图片**：为后续分镜提供视觉参考

## 技术实现

### 核心文件

1. **videoCapture.ts**：视频截帧工具函数
   - `captureVideoFrame()`：从视频 URL 截取指定时间点的帧
   - `downloadBlob()`：下载 Blob 为文件
   - `captureAndDownloadFrame()`：截取并下载的便捷方法

2. **FrameCaptureModal.tsx**：关键帧截取弹窗组件
   - 视频播放和时间轴控制
   - Canvas 截帧实现
   - 实时预览和下载功能

3. **StoryboardCard.tsx**：分镜卡片组件（已更新）
   - 添加相机图标按钮
   - 集成关键帧截取弹窗

### 技术要点

- 使用 HTML5 Canvas API 进行视频截帧
- 支持跨域视频（crossOrigin="anonymous"）
- 精确的时间控制（0.01 秒精度）
- 响应式设计，支持深色模式

## 使用方法

1. 在分镜编辑器中生成视频
2. 视频生成完成后，卡片右上角会显示相机图标
3. 点击相机图标打开截取弹窗
4. 播放视频或拖动时间轴到目标位置
5. 点击"截取当前帧"按钮
6. 预览截取的图片
7. 点击"下载图片"保存到本地

## 注意事项

- 只有已生成视频的分镜才会显示截取按钮
- 视频需要支持跨域访问才能正常截取
- 截取的图片分辨率与原视频一致
- 建议在视频暂停时截取，以获得更清晰的画面
