@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        --background: 220 20% 97%;
        --foreground: 224 71% 4%;
        --card: 0 0% 100%;
        --card-foreground: 224 71% 4%;
        --popover: 0 0% 100%;
        --popover-foreground: 224 71% 4%;
        --primary: 262 83% 58%;
        --primary-foreground: 210 40% 98%;
        --secondary: 220 14% 96%;
        --secondary-foreground: 220 9% 46%;
        --muted: 220 14% 96%;
        --muted-foreground: 220 9% 46%;
        --accent: 262 83% 58%;
        --accent-foreground: 210 40% 98%;
        --destructive: 0 84% 60%;
        --destructive-foreground: 210 40% 98%;
        --border: 220 13% 91%;
        --input: 220 13% 91%;
        --ring: 262 83% 58%;
        --radius: 0.75rem;
    }

    .dark {
        --background: 224 71% 4%;
        --foreground: 210 40% 98%;
        --card: 224 71% 8%;
        --card-foreground: 210 40% 98%;
        --popover: 224 71% 8%;
        --popover-foreground: 210 40% 98%;
        --primary: 263 70% 50%;
        --primary-foreground: 210 40% 98%;
        --secondary: 215 28% 17%;
        --secondary-foreground: 210 40% 98%;
        --muted: 215 28% 17%;
        --muted-foreground: 217 10% 64%;
        --accent: 263 70% 50%;
        --accent-foreground: 210 40% 98%;
        --destructive: 0 63% 31%;
        --destructive-foreground: 210 40% 98%;
        --border: 215 28% 17%;
        --input: 215 28% 17%;
        --ring: 263 70% 50%;
    }
}

@layer base {
    * {
        @apply border-border;
    }

    body {
        @apply bg-background text-foreground antialiased;
        font-feature-settings: "rlig" 1, "calt" 1;
    }

    textarea:focus,
    textarea:focus-visible {
        outline: none !important;
        box-shadow: none !important;
    }
}

@layer utilities {
    /* 自定义滚动条 - 优化版 */
    .scrollbar-thin {
        scrollbar-width: thin;
        scrollbar-color: hsl(var(--muted-foreground) / 0.2) transparent;
    }

    .scrollbar-thin::-webkit-scrollbar {
        width: 5px;
    }

    .scrollbar-thin::-webkit-scrollbar-track {
        background: transparent;
        border-radius: 10px;
        margin: 4px 0;
    }

    .scrollbar-thin::-webkit-scrollbar-thumb {
        background: linear-gradient(180deg, hsl(262 83% 58% / 0.3), hsl(263 70% 50% / 0.3));
        border-radius: 10px;
        transition: background 0.2s ease;
    }

    .scrollbar-thin::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(180deg, hsl(262 83% 58% / 0.5), hsl(263 70% 50% / 0.5));
    }

    .scrollbar-thin::-webkit-scrollbar-thumb:active {
        background: linear-gradient(180deg, hsl(262 83% 58% / 0.7), hsl(263 70% 50% / 0.7));
    }

    /* 隐藏滚动条但保持滚动功能 */
    .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }

    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }

    /* 玻璃态效果 */
    .glass {
        @apply bg-white/70 dark:bg-gray-900/70 backdrop-blur-xl;
    }

    .glass-card {
        @apply bg-white/80 dark:bg-gray-800/80 backdrop-blur-lg border border-white/20 dark:border-gray-700/30;
    }

    /* 渐变文字 */
    .gradient-text {
        @apply bg-clip-text text-transparent bg-gradient-to-r from-violet-600 via-purple-600 to-indigo-600;
    }

    /* 渐变边框 */
    .gradient-border {
        position: relative;
    }
    
    .gradient-border::before {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: inherit;
        padding: 1px;
        background: linear-gradient(135deg, #8b5cf6, #6366f1, #3b82f6);
        -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
    }

    /* 发光效果 */
    .glow {
        box-shadow: 0 0 20px -5px hsl(var(--primary) / 0.4);
    }

    .glow-sm {
        box-shadow: 0 0 10px -3px hsl(var(--primary) / 0.3);
    }

    /* 悬浮动画 */
    .hover-lift {
        @apply transition-all duration-300 ease-out;
    }

    .hover-lift:hover {
        @apply -translate-y-1 shadow-xl;
    }

    /* 脉冲动画 */
    .pulse-soft {
        animation: pulse-soft 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    @keyframes pulse-soft {
        0%, 100% {
            opacity: 1;
        }
        50% {
            opacity: 0.7;
        }
    }

    /* 渐变背景动画 */
    .animate-gradient {
        background-size: 200% 200%;
        animation: gradient-shift 8s ease infinite;
    }

    @keyframes gradient-shift {
        0% {
            background-position: 0% 50%;
        }
        50% {
            background-position: 100% 50%;
        }
        100% {
            background-position: 0% 50%;
        }
    }

    /* 闪烁点动画 */
    .typing-dot {
        animation: typing-bounce 1.4s infinite ease-in-out both;
    }

    .typing-dot:nth-child(1) {
        animation-delay: -0.32s;
    }

    .typing-dot:nth-child(2) {
        animation-delay: -0.16s;
    }

    @keyframes typing-bounce {
        0%, 80%, 100% {
            transform: scale(0.8);
            opacity: 0.5;
        }
        40% {
            transform: scale(1);
            opacity: 1;
        }
    }

    /* 现代卡片阴影 */
    .shadow-soft {
        box-shadow: 
            0 2px 8px -2px rgba(0, 0, 0, 0.05),
            0 4px 16px -4px rgba(0, 0, 0, 0.1);
    }

    .shadow-soft-lg {
        box-shadow: 
            0 4px 12px -4px rgba(0, 0, 0, 0.05),
            0 8px 32px -8px rgba(0, 0, 0, 0.1);
    }

    /* 霓虹发光效果 */
    .neon-glow-cyan {
        box-shadow: 0 0 10px rgba(0, 245, 255, 0.3), 0 0 20px rgba(0, 245, 255, 0.2), 0 0 30px rgba(0, 245, 255, 0.1);
    }

    .neon-glow-pink {
        box-shadow: 0 0 10px rgba(255, 0, 255, 0.3), 0 0 20px rgba(255, 0, 255, 0.2), 0 0 30px rgba(255, 0, 255, 0.1);
    }

    .neon-glow-purple {
        box-shadow: 0 0 10px rgba(191, 0, 255, 0.3), 0 0 20px rgba(191, 0, 255, 0.2), 0 0 30px rgba(191, 0, 255, 0.1);
    }

    /* 霓虹文字 */
    .neon-text-cyan {
        color: #00f5ff;
        text-shadow: 0 0 5px rgba(0, 245, 255, 0.5), 0 0 10px rgba(0, 245, 255, 0.3);
    }

    .neon-text-pink {
        color: #ff00ff;
        text-shadow: 0 0 5px rgba(255, 0, 255, 0.5), 0 0 10px rgba(255, 0, 255, 0.3);
    }

    /* 动态霓虹网格动画 */
    @keyframes gridFlow {
        0%, 100% {
            opacity: 0.3;
            background-position: 0 0;
        }
        50% {
            opacity: 0.5;
            background-position: 30px 30px;
        }
    }

    .animate-grid-flow {
        animation: gridFlow 8s ease-in-out infinite;
    }

    /* 霓虹光晕动画 */
    @keyframes glowFloat1 {
        0%, 100% {
            transform: translate(0, 0) scale(1);
            opacity: 0.25;
        }
        33% {
            transform: translate(30px, -20px) scale(1.1);
            opacity: 0.35;
        }
        66% {
            transform: translate(-20px, 30px) scale(0.95);
            opacity: 0.2;
        }
    }

    @keyframes glowFloat2 {
        0%, 100% {
            transform: translate(0, 0) scale(1);
            opacity: 0.2;
        }
        33% {
            transform: translate(-25px, 35px) scale(1.05);
            opacity: 0.3;
        }
        66% {
            transform: translate(35px, -15px) scale(0.9);
            opacity: 0.15;
        }
    }

    @keyframes glowFloat3 {
        0%, 100% {
            transform: translate(0, 0) scale(1);
            opacity: 0.2;
        }
        33% {
            transform: translate(40px, 20px) scale(0.95);
            opacity: 0.15;
        }
        66% {
            transform: translate(-30px, -25px) scale(1.1);
            opacity: 0.3;
        }
    }

    @keyframes glowFloat4 {
        0%, 100% {
            transform: translate(0, 0) scale(1);
            opacity: 0.15;
        }
        50% {
            transform: translate(20px, -30px) scale(1.15);
            opacity: 0.25;
        }
    }

    .animate-glow-1 {
        animation: glowFloat1 12s ease-in-out infinite;
    }

    .animate-glow-2 {
        animation: glowFloat2 15s ease-in-out infinite;
    }

    .animate-glow-3 {
        animation: glowFloat3 18s ease-in-out infinite;
    }

    .animate-glow-4 {
        animation: glowFloat4 10s ease-in-out infinite;
    }

    /* 霓虹边框动画 */
    .neon-border-animate {
        position: relative;
    }

    .neon-border-animate::before {
        content: '';
        position: absolute;
        inset: -1px;
        background: linear-gradient(90deg, #00f5ff, #ff00ff, #bf00ff, #00f5ff);
        background-size: 300% 100%;
        border-radius: inherit;
        z-index: -1;
        animation: borderFlow 3s linear infinite;
    }

    @keyframes borderFlow {
        0% { background-position: 0% 50%; }
        100% { background-position: 300% 50%; }
    }

    /* 闪烁动画 - 用于停止按钮 */
    .animate-shimmer {
        animation: shimmer 2s linear infinite;
    }

    @keyframes shimmer {
        0% {
            transform: translateX(-100%);
        }
        100% {
            transform: translateX(100%);
        }
    }

    /* 淡入缩放动画 */
    .animate-fade-in {
        animation: fade-in 0.2s ease-out;
    }

    @keyframes fade-in {
        from {
            opacity: 0;
            transform: scale(0.95);
        }
        to {
            opacity: 1;
            transform: scale(1);
        }
    }

    /* 缩放动画 */
    .animate-scale-in {
        animation: scale-in 0.2s ease-out;
    }

    @keyframes scale-in {
        from {
            opacity: 0;
            transform: scale(0.9);
        }
        to {
            opacity: 1;
            transform: scale(1);
        }
    }

    /* Markdown 样式优化 */
    .prose {
        @apply text-sm leading-relaxed;
    }

    .prose p {
        @apply my-2;
    }

    .prose p:first-child {
        @apply mt-0;
    }

    .prose p:last-child {
        @apply mb-0;
    }

    .prose code {
        @apply text-sm;
    }

    .prose pre {
        @apply my-3 rounded-lg;
    }

    .prose pre code {
        @apply text-sm;
    }

    /* 代码高亮样式 */
    .prose pre code.hljs {
        @apply block overflow-x-auto p-4 bg-gray-900 dark:bg-gray-950 rounded-lg;
    }

    .prose :not(pre) > code.hljs {
        @apply inline-block px-1.5 py-0.5 rounded;
    }

    /* 亮色主题代码块 */
    .prose:not(.prose-invert) pre {
        @apply bg-gray-900 text-gray-100;
    }

    /* 暗色主题代码块 */
    .dark .prose pre {
        @apply bg-gray-950 text-gray-100;
    }

    /* 表格样式 */
    .prose table {
        @apply w-full border-collapse my-3;
    }

    .prose th,
    .prose td {
        @apply border border-gray-300 dark:border-gray-600 px-3 py-2;
    }

    .prose th {
        @apply bg-gray-100 dark:bg-gray-800 font-semibold;
    }

    /* 引用块样式 */
    .prose blockquote {
        @apply border-l-4 border-purple-500 pl-4 my-3 italic text-gray-700 dark:text-gray-300;
    }

    /* 列表样式 */
    .prose ul,
    .prose ol {
        @apply my-2 pl-6;
    }

    .prose li {
        @apply my-1;
    }

    /* 标题样式 */
    .prose h1,
    .prose h2,
    .prose h3,
    .prose h4,
    .prose h5,
    .prose h6 {
        @apply font-bold mt-4 mb-2;
    }

    .prose h1 {
        @apply text-xl;
    }

    .prose h2 {
        @apply text-lg;
    }

    .prose h3 {
        @apply text-base;
    }

    /* 链接样式 */
    .prose a {
        @apply text-purple-600 dark:text-purple-400 hover:underline;
    }

    /* 水平线样式 */
    .prose hr {
        @apply my-4 border-gray-300 dark:border-gray-600;
    }

    /* 赛博朋克扫描线效果 */
    .cyber-scanlines {
        position: relative;
        overflow: hidden;
    }

    .cyber-scanlines::after {
        content: '';
        position: absolute;
        inset: 0;
        background: repeating-linear-gradient(
            0deg,
            transparent,
            transparent 2px,
            rgba(0, 245, 255, 0.03) 2px,
            rgba(0, 245, 255, 0.03) 4px
        );
        pointer-events: none;
    }

    /* 赛博朋克网格背景 */
    .cyber-grid {
        background-image: 
            linear-gradient(rgba(0, 245, 255, 0.03) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0, 245, 255, 0.03) 1px, transparent 1px);
        background-size: 20px 20px;
    }

    /* 霓虹边框闪烁 */
    @keyframes neonFlicker {
        0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
            opacity: 1;
        }
        20%, 24%, 55% {
            opacity: 0.6;
        }
    }

    .neon-flicker {
        animation: neonFlicker 3s infinite;
    }

    /* 赛博朋克滚动条 - 垂直 */
    .cyber-scrollbar::-webkit-scrollbar {
        width: 4px;
        height: 4px;
    }

    .cyber-scrollbar::-webkit-scrollbar-track {
        background: rgba(30, 30, 46, 0.5);
        border-radius: 2px;
    }

    .cyber-scrollbar::-webkit-scrollbar-thumb {
        background: rgba(0, 245, 255, 0.4);
        border-radius: 2px;
    }

    .cyber-scrollbar::-webkit-scrollbar-thumb:hover {
        background: rgba(0, 245, 255, 0.6);
    }

    /* 横向滚动条专用 */
    .cyber-scrollbar-x::-webkit-scrollbar {
        height: 3px;
    }

    .cyber-scrollbar-x::-webkit-scrollbar-track {
        background: rgba(30, 30, 46, 0.3);
        border-radius: 2px;
    }

    .cyber-scrollbar-x::-webkit-scrollbar-thumb {
        background: rgba(0, 245, 255, 0.3);
        border-radius: 2px;
    }

    .cyber-scrollbar-x::-webkit-scrollbar-thumb:hover {
        background: rgba(0, 245, 255, 0.5);
    }

    /* 赛博朋克按钮悬停效果 */
    .cyber-btn {
        position: relative;
        overflow: hidden;
    }

    .cyber-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
            90deg,
            transparent,
            rgba(0, 245, 255, 0.2),
            transparent
        );
        transition: left 0.5s;
    }

    .cyber-btn:hover::before {
        left: 100%;
    }

    /* 数据流动画 */
    @keyframes dataFlow {
        0% {
            background-position: 0% 0%;
        }
        100% {
            background-position: 100% 100%;
        }
    }

    .data-flow {
        background: linear-gradient(
            135deg,
            transparent 25%,
            rgba(0, 245, 255, 0.1) 25%,
            rgba(0, 245, 255, 0.1) 50%,
            transparent 50%,
            transparent 75%,
            rgba(191, 0, 255, 0.1) 75%
        );
        background-size: 20px 20px;
        animation: dataFlow 2s linear infinite;
    }

    /* 全息效果 */
    .hologram {
        background: linear-gradient(
            135deg,
            rgba(0, 245, 255, 0.1) 0%,
            rgba(191, 0, 255, 0.1) 50%,
            rgba(0, 245, 255, 0.1) 100%
        );
        backdrop-filter: blur(10px);
    }
}
